{"ast":null,"code":"import _slicedToArray from\"C:/Users/wesle/Documents/Scorch/EnterpriseSites/Scorch/scorch-web-app/frontend/scorch-web-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// ./frontend/src/components/Customers/ListView/ListView.js\nimport React,{useState,useEffect}from'react';import CustomerListItem from'./CustomerListItem';import'./ListView.css';import{getCustomerAddressesByClientID}from'../../../api/CustomerAPI';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ListView=function ListView(_ref){var externalCustomers=_ref.customers,setSelectedCustomer=_ref.setSelectedCustomer,selectedCustomerId=_ref.selectedCustomerId,_onEdit=_ref.onEdit;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),customers=_useState2[0],setCustomers=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var fetchCustomers=function fetchCustomers(){getCustomerAddressesByClientID(1).then(function(data){setCustomers(data);setLoading(false);}).catch(function(err){setError(err.message);setLoading(false);});};var refreshCustomersList=function refreshCustomersList(){setLoading(true);// Set loading to true to show a loading indicator\nfetchCustomers();};useEffect(function(){// Using ClientID 1 for testing. REMINDER: Make dynamic later.\n// Only fetch if there's no external data provided\nif(externalCustomers.length===0){fetchCustomers();}else{setCustomers(externalCustomers);setLoading(false);}},[externalCustomers]);if(loading){return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});}if(error){return/*#__PURE__*/_jsxs(\"p\",{children:[\"Error: \",error]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"customer-list\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:refreshCustomersList,children:\"Refresh List\"}),customers.map(function(customer){return/*#__PURE__*/_jsx(CustomerListItem,{customer:customer,isExpanded:customer.CustomerID===selectedCustomerId,onToggle:function onToggle(){setSelectedCustomer(customer);// This will now pass the entire customer object with \"CustomerID\" field\n},onEdit:function onEdit(){return _onEdit(customer);}// Propagate the function\n},customer.CustomerID);})]});};export default ListView;","map":{"version":3,"names":["React","useState","useEffect","CustomerListItem","getCustomerAddressesByClientID","jsx","_jsx","jsxs","_jsxs","ListView","_ref","externalCustomers","customers","setSelectedCustomer","selectedCustomerId","onEdit","_useState","_useState2","_slicedToArray","setCustomers","_useState3","_useState4","loading","setLoading","_useState5","_useState6","error","setError","fetchCustomers","then","data","catch","err","message","refreshCustomersList","length","children","className","onClick","map","customer","isExpanded","CustomerID","onToggle"],"sources":["C:/Users/wesle/Documents/Scorch/EnterpriseSites/Scorch/scorch-web-app/frontend/scorch-web-app/src/components/Customers/ListView/ListView.js"],"sourcesContent":["// ./frontend/src/components/Customers/ListView/ListView.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport CustomerListItem from './CustomerListItem';\r\nimport './ListView.css';\r\nimport { getCustomerAddressesByClientID } from '../../../api/CustomerAPI';\r\n\r\nconst ListView = ({ customers: externalCustomers, setSelectedCustomer, selectedCustomerId, onEdit }) => {\r\n    const [customers, setCustomers] = useState([]);\r\n    const [loading, setLoading] = useState(true); \r\n    const [error, setError] = useState(null);\r\n\r\n    const fetchCustomers = () => {\r\n        getCustomerAddressesByClientID(1)\r\n            .then(data => {\r\n                setCustomers(data);\r\n                setLoading(false);\r\n            })\r\n            .catch(err => {\r\n                setError(err.message);\r\n                setLoading(false);\r\n            });\r\n    };\r\n\r\n    const refreshCustomersList = () => {\r\n        setLoading(true); // Set loading to true to show a loading indicator\r\n        fetchCustomers();\r\n    };\r\n\r\n    useEffect(() => {\r\n        // Using ClientID 1 for testing. REMINDER: Make dynamic later.\r\n        // Only fetch if there's no external data provided\r\n        if (externalCustomers.length === 0) {\r\n            fetchCustomers();\r\n        } else {\r\n            setCustomers(externalCustomers);\r\n            setLoading(false);\r\n        }\r\n    }, [externalCustomers]);\r\n\r\n    if (loading) {\r\n        return <p>Loading...</p>;\r\n    }\r\n\r\n    if (error) {\r\n        return <p>Error: {error}</p>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"customer-list\">\r\n            <button className=\"button\" onClick={refreshCustomersList}>Refresh List</button>\r\n            {customers.map(customer => \r\n                <CustomerListItem \r\n                    key={customer.CustomerID} \r\n                    customer={customer} \r\n                    isExpanded={customer.CustomerID === selectedCustomerId}\r\n                    onToggle={() => {\r\n                        setSelectedCustomer(customer);  // This will now pass the entire customer object with \"CustomerID\" field\r\n                    }}\r\n                    onEdit={() => onEdit(customer)}  // Propagate the function\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ListView;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}