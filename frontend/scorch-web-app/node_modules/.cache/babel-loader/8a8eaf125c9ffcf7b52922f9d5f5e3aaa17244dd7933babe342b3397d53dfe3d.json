{"ast":null,"code":"import _slicedToArray from\"C:/Users/wesle/Documents/Scorch/EnterpriseSites/Scorch/scorch-web-app/frontend/scorch-web-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// ./frontend/src/components/Customers/ListView/ListView.js\nimport React,{useState,useEffect}from'react';import CustomerListItem from'./CustomerListItem';import'./ListView.css';import{getCustomerAddressesByClientID}from'../../../api/CustomerAPI';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ListView=function ListView(_ref){var externalCustomers=_ref.customers,setSelectedCustomer=_ref.setSelectedCustomer,selectedCustomerId=_ref.selectedCustomerId,_onEdit=_ref.onEdit;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),customers=_useState2[0],setCustomers=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),expandedCustomerID=_useState8[0],setExpandedCustomerID=_useState8[1];useEffect(function(){// Using ClientID 1 for testing. REMINDER: Make dynamic later.\n// Only fetch if there's no external data provided\nif(externalCustomers.length===0){getCustomerAddressesByClientID(1).then(function(data){setCustomers(data);setLoading(false);}).catch(function(err){setError(err.message);setLoading(false);});}else{setCustomers(externalCustomers);setLoading(false);}},[externalCustomers]);if(loading){return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});}if(error){return/*#__PURE__*/_jsxs(\"p\",{children:[\"Error: \",error]});}return/*#__PURE__*/_jsx(\"div\",{className:\"customer-list\",children:customers.map(function(customer){return/*#__PURE__*/_jsx(CustomerListItem,{customer:customer,isExpanded:customer.CustomerID===selectedCustomerId,onToggle:function onToggle(){setSelectedCustomer(customer);// This will now pass the entire customer object with \"CustomerID\" field\n},onEdit:function onEdit(){return _onEdit(customer);}// Propagate the function\n},customer.CustomerID);})});};export default ListView;","map":{"version":3,"names":["React","useState","useEffect","CustomerListItem","getCustomerAddressesByClientID","jsx","_jsx","jsxs","_jsxs","ListView","_ref","externalCustomers","customers","setSelectedCustomer","selectedCustomerId","onEdit","_useState","_useState2","_slicedToArray","setCustomers","_useState3","_useState4","loading","setLoading","_useState5","_useState6","error","setError","_useState7","_useState8","expandedCustomerID","setExpandedCustomerID","length","then","data","catch","err","message","children","className","map","customer","isExpanded","CustomerID","onToggle"],"sources":["C:/Users/wesle/Documents/Scorch/EnterpriseSites/Scorch/scorch-web-app/frontend/scorch-web-app/src/components/Customers/ListView/ListView.js"],"sourcesContent":["// ./frontend/src/components/Customers/ListView/ListView.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport CustomerListItem from './CustomerListItem';\r\nimport './ListView.css';\r\nimport { getCustomerAddressesByClientID } from '../../../api/CustomerAPI';\r\n\r\nconst ListView = ({ customers: externalCustomers, setSelectedCustomer, selectedCustomerId, onEdit  }) => {\r\n    const [customers, setCustomers] = useState([]);\r\n    const [loading, setLoading] = useState(true); \r\n    const [error, setError] = useState(null);\r\n    const [expandedCustomerID, setExpandedCustomerID] = useState(null);\r\n\r\n    useEffect(() => {\r\n        // Using ClientID 1 for testing. REMINDER: Make dynamic later.\r\n        // Only fetch if there's no external data provided\r\n        if (externalCustomers.length === 0) {\r\n            getCustomerAddressesByClientID(1)\r\n                .then(data => {\r\n                    setCustomers(data);\r\n                    setLoading(false);\r\n                })\r\n                .catch(err => {\r\n                    setError(err.message);\r\n                    setLoading(false);\r\n                });\r\n        } else {\r\n            setCustomers(externalCustomers);\r\n            setLoading(false);\r\n        }\r\n    }, [externalCustomers]);\r\n\r\n    if (loading) {\r\n        return <p>Loading...</p>;\r\n    }\r\n\r\n    if (error) {\r\n        return <p>Error: {error}</p>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"customer-list\">\r\n            {customers.map(customer => \r\n                <CustomerListItem \r\n                    key={customer.CustomerID} \r\n                    customer={customer} \r\n                    isExpanded={customer.CustomerID === selectedCustomerId}\r\n                    onToggle={() => {\r\n                        setSelectedCustomer(customer);  // This will now pass the entire customer object with \"CustomerID\" field\r\n                    }}\r\n                    onEdit={() => onEdit(customer)}  // Propagate the function\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ListView;\r\n"],"mappings":"mLAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,gBAAgB,KAAM,oBAAoB,CACjD,MAAO,gBAAgB,CACvB,OAASC,8BAA8B,KAAQ,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE1E,GAAM,CAAAC,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAAC,IAAA,CAA2F,IAA1E,CAAAC,iBAAiB,CAAAD,IAAA,CAA5BE,SAAS,CAAqBC,mBAAmB,CAAAH,IAAA,CAAnBG,mBAAmB,CAAEC,kBAAkB,CAAAJ,IAAA,CAAlBI,kBAAkB,CAAEC,OAAM,CAAAL,IAAA,CAANK,MAAM,CAC7F,IAAAC,SAAA,CAAkCf,QAAQ,CAAC,EAAE,CAAC,CAAAgB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAvCJ,SAAS,CAAAK,UAAA,IAAEE,YAAY,CAAAF,UAAA,IAC9B,IAAAG,UAAA,CAA8BnB,QAAQ,CAAC,IAAI,CAAC,CAAAoB,UAAA,CAAAH,cAAA,CAAAE,UAAA,IAArCE,OAAO,CAAAD,UAAA,IAAEE,UAAU,CAAAF,UAAA,IAC1B,IAAAG,UAAA,CAA0BvB,QAAQ,CAAC,IAAI,CAAC,CAAAwB,UAAA,CAAAP,cAAA,CAAAM,UAAA,IAAjCE,KAAK,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IACtB,IAAAG,UAAA,CAAoD3B,QAAQ,CAAC,IAAI,CAAC,CAAA4B,UAAA,CAAAX,cAAA,CAAAU,UAAA,IAA3DE,kBAAkB,CAAAD,UAAA,IAAEE,qBAAqB,CAAAF,UAAA,IAEhD3B,SAAS,CAAC,UAAM,CACZ;AACA;AACA,GAAIS,iBAAiB,CAACqB,MAAM,GAAK,CAAC,CAAE,CAChC5B,8BAA8B,CAAC,CAAC,CAAC,CAC5B6B,IAAI,CAAC,SAAAC,IAAI,CAAI,CACVf,YAAY,CAACe,IAAI,CAAC,CAClBX,UAAU,CAAC,KAAK,CAAC,CACrB,CAAC,CAAC,CACDY,KAAK,CAAC,SAAAC,GAAG,CAAI,CACVT,QAAQ,CAACS,GAAG,CAACC,OAAO,CAAC,CACrBd,UAAU,CAAC,KAAK,CAAC,CACrB,CAAC,CAAC,CACV,CAAC,IAAM,CACHJ,YAAY,CAACR,iBAAiB,CAAC,CAC/BY,UAAU,CAAC,KAAK,CAAC,CACrB,CACJ,CAAC,CAAE,CAACZ,iBAAiB,CAAC,CAAC,CAEvB,GAAIW,OAAO,CAAE,CACT,mBAAOhB,IAAA,MAAAgC,QAAA,CAAG,YAAU,CAAG,CAAC,CAC5B,CAEA,GAAIZ,KAAK,CAAE,CACP,mBAAOlB,KAAA,MAAA8B,QAAA,EAAG,SAAO,CAACZ,KAAK,EAAI,CAAC,CAChC,CAEA,mBACIpB,IAAA,QAAKiC,SAAS,CAAC,eAAe,CAAAD,QAAA,CACzB1B,SAAS,CAAC4B,GAAG,CAAC,SAAAC,QAAQ,qBACnBnC,IAAA,CAACH,gBAAgB,EAEbsC,QAAQ,CAAEA,QAAS,CACnBC,UAAU,CAAED,QAAQ,CAACE,UAAU,GAAK7B,kBAAmB,CACvD8B,QAAQ,CAAE,SAAAA,SAAA,CAAM,CACZ/B,mBAAmB,CAAC4B,QAAQ,CAAC,CAAG;AACpC,CAAE,CACF1B,MAAM,CAAE,SAAAA,OAAA,QAAM,CAAAA,OAAM,CAAC0B,QAAQ,CAAC,EAAG;AAAA,EAN5BA,QAAQ,CAACE,UAOjB,CAAC,EACN,CAAC,CACA,CAAC,CAEd,CAAC,CAED,cAAe,CAAAlC,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}